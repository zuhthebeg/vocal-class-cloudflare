# ğŸµ Vocal Class on Cloudflare

cocy.io ë„ë©”ì¸ìœ¼ë¡œ ìš´ì˜í•˜ëŠ” ë³´ì»¬ ìˆ˜ì—… ê´€ë¦¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤. Cloudflareì˜ ë¬´ë£Œ ì„œë¹„ìŠ¤ë¥¼ ìµœëŒ€í•œ í™œìš©í•˜ì—¬ ë¹„ìš© íš¨ìœ¨ì ìœ¼ë¡œ êµ¬ì¶•ë˜ì—ˆìŠµë‹ˆë‹¤.

## âœ¨ ì£¼ìš” íŠ¹ì§•

- **ì™„ì „ ë¬´ë£Œ ì‹œì‘**: Cloudflare Pages, D1, R2 ë¬´ë£Œ í‹°ì–´ í™œìš©
- **ì„œë²„ë¦¬ìŠ¤ ì•„í‚¤í…ì²˜**: ê´€ë¦¬ ë¶€ë‹´ ìµœì†Œí™”
- **ê¸€ë¡œë²Œ CDN**: ì „ ì„¸ê³„ ì–´ë””ì„œë‚˜ ë¹ ë¥¸ ì ‘ì†
- **í™•ì¥ ê°€ëŠ¥**: íŠ¸ë˜í”½ ì¦ê°€ ì‹œ ìë™ ìŠ¤ì¼€ì¼ë§
- **PWA ì§€ì›**: ì˜¤í”„ë¼ì¸ì—ì„œë„ ë™ì‘

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Cloudflare Pages                  â”‚
â”‚   (ì •ì  í˜¸ìŠ¤íŒ… + PWA)                â”‚
â”‚   - index.html                      â”‚
â”‚   - teacher.html                    â”‚
â”‚   - student.html                    â”‚
â”‚   - signature.html                  â”‚
â”‚   - tools.html                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Pages Functions (ì„œë²„ë¦¬ìŠ¤)         â”‚
â”‚   - /api/attendance                 â”‚
â”‚   - /api/schedule                   â”‚
â”‚   - /api/bookings                   â”‚
â”‚   - /api/recordings                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   D1 Database   â”‚   R2 Storage      â”‚
â”‚   (SQLite)      â”‚   (Object Store)  â”‚
â”‚   - ì‚¬ìš©ì       â”‚   - ì„œëª… ì´ë¯¸ì§€    â”‚
â”‚   - ìŠ¤ì¼€ì¤„       â”‚   - ë…¹ìŒ íŒŒì¼      â”‚
â”‚   - ì˜ˆì•½         â”‚                   â”‚
â”‚   - ì¶œì„         â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’° ë¹„ìš© ë¶„ì„

### ë¬´ë£Œ í‹°ì–´ (ì›” ê¸°ì¤€)
- **Cloudflare Pages**: ë¬´ì œí•œ ìš”ì²­, 500 ë¹Œë“œ
- **D1 Database**: 5GB ì €ì¥ì†Œ, 5ë°±ë§Œ ì½ê¸°, 10ë§Œ ì“°ê¸°
- **R2 Storage**: 10GB ì €ì¥ì†Œ, 100ë§Œ ìš”ì²­

### ì˜ˆìƒ ì‚¬ìš©ëŸ‰ë³„ ë¹„ìš©
| í™œì„± ì‚¬ìš©ì | ì›” ë¹„ìš© | ì„¤ëª… |
|------------|--------|------|
| ~1,000ëª… | **$0** | ì™„ì „ ë¬´ë£Œ |
| ~10,000ëª… | **~$5** | D1 ì´ˆê³¼ ìš”ê¸ˆë§Œ |
| ~100,000ëª… | **~$85** | ëª¨ë“  ì„œë¹„ìŠ¤ ì¢…ëŸ‰ì œ |

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. ì‚¬ì „ ìš”êµ¬ì‚¬í•­
```bash
# Node.js 18+ ì„¤ì¹˜ í™•ì¸
node --version

# Wrangler CLI ì„¤ì¹˜
npm install -g wrangler
```

### 2. ë¹ ë¥¸ ë°°í¬
```bash
# ì €ì¥ì†Œ í´ë¡ 
git clone <your-repo-url>
cd vocal-class-cloudflare

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# ìë™ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
./deploy.sh
```

### 3. ìˆ˜ë™ ë°°í¬ (ë” ì„¸ë°€í•œ ì œì–´)

#### 3-1. Cloudflare ë¡œê·¸ì¸
```bash
wrangler login
```

#### 3-2. D1 ë°ì´í„°ë² ì´ìŠ¤ ìƒì„±
```bash
wrangler d1 create vocal-class-db
# ì¶œë ¥ëœ database_idë¥¼ wrangler.tomlì— ë³µì‚¬
```

#### 3-3. ìŠ¤í‚¤ë§ˆ ì´ˆê¸°í™”
```bash
wrangler d1 execute vocal-class-db --file=./schema.sql
```

#### 3-4. R2 ë²„í‚· ìƒì„±
```bash
wrangler r2 bucket create vocal-class-storage
```

#### 3-5. ë°°í¬
```bash
# Direct Upload
wrangler pages deploy . --project-name=vocal-class

# ë˜ëŠ” Git ì—°ê²° (Cloudflare ëŒ€ì‹œë³´ë“œì—ì„œ)
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
vocal-class-cloudflare/
â”œâ”€â”€ wrangler.toml              # Cloudflare ì„¤ì •
â”œâ”€â”€ schema.sql                 # D1 ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ
â”œâ”€â”€ package.json               # NPM ì„¤ì •
â”œâ”€â”€ tsconfig.json              # TypeScript ì„¤ì •
â”œâ”€â”€ deploy.sh                  # ìë™ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
â”‚
â”œâ”€â”€ functions/                 # Pages Functions (API)
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ attendance.ts      # ì¶œì„ API
â”‚       â”œâ”€â”€ schedule.ts        # ìŠ¤ì¼€ì¤„ API
â”‚       â”œâ”€â”€ bookings.ts        # ì˜ˆì•½ API
â”‚       â””â”€â”€ recordings.ts      # ë…¹ìŒ API
â”‚
â”œâ”€â”€ index.html                 # ë¡œê·¸ì¸ í˜ì´ì§€
â”œâ”€â”€ teacher.html               # ê°•ì‚¬ í˜ì´ì§€
â”œâ”€â”€ student.html               # ìˆ˜ê°•ìƒ í˜ì´ì§€
â”œâ”€â”€ signature.html             # ì„œëª…/ì¶œì„ í˜ì´ì§€
â”œâ”€â”€ tools.html                 # ìˆ˜ì—… ë„êµ¬ í˜ì´ì§€
â”‚
â”œâ”€â”€ css/                       # ìŠ¤íƒ€ì¼ì‹œíŠ¸
â”œâ”€â”€ js/                        # JavaScript íŒŒì¼
â”‚   â”œâ”€â”€ auth.js
â”‚   â”œâ”€â”€ teacher.js
â”‚   â”œâ”€â”€ student.js
â”‚   â”œâ”€â”€ signature.js
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ images/                    # ì´ë¯¸ì§€ íŒŒì¼
```

## ğŸ”§ ë¡œì»¬ ê°œë°œ

```bash
# ë¡œì»¬ ê°œë°œ ì„œë²„ ì‹¤í–‰ (D1, R2 í¬í•¨)
npm run dev

# ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:8788 ì ‘ì†
```

## ğŸ“š ë¬¸ì„œ

- **[DEPLOYMENT.md](./DEPLOYMENT.md)**: ìƒì„¸ ë°°í¬ ê°€ì´ë“œ
- **[MIGRATION.md](./MIGRATION.md)**: localStorage â†’ API ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ì´ë“œ

## ğŸ¯ ì£¼ìš” ê¸°ëŠ¥

### ê°•ì‚¬ ê¸°ëŠ¥
- âœ… ì£¼ê°„ ê°€ëŠ¥ ì‹œê°„ ì„¤ì •
- âœ… ì˜ˆì•½ í˜„í™© í™•ì¸
- âœ… QR ì½”ë“œ ì¶œì„ ì²´í¬
- âœ… ìˆ˜ì—… ë„êµ¬ (ë“œë¡œì‰, ë…¹ìŒ, ì˜ˆì‹œ ì˜ìƒ)

### ìˆ˜ê°•ìƒ ê¸°ëŠ¥
- âœ… ê°•ì‚¬ ìŠ¤ì¼€ì¤„ í™•ì¸
- âœ… ìˆ˜ì—… ì˜ˆì•½
- âœ… ì¶œì„ ì„œëª…
- âœ… ì˜ˆì•½ ë‚´ì—­ í™•ì¸

### ê³µí†µ ê¸°ëŠ¥
- âœ… ë“œë¡œì‰ ë³´ë“œ (ì‹¤ì‹œê°„ íŒì„œ)
- âœ… ë…¹ìŒê¸° (ìˆ˜ì—… ë…¹ìŒ)
- âœ… ì˜ˆì‹œ ì˜ìƒ ê´€ë¦¬
- âœ… PWA (ì˜¤í”„ë¼ì¸ ì§€ì›)

## ğŸ” ë³´ì•ˆ

- HTTPS ìë™ ì ìš©
- ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦
- CORS ì„¤ì •
- XSS/CSRF ë°©ì–´

## ğŸŒ ì»¤ìŠ¤í…€ ë„ë©”ì¸ ì—°ê²°

### cocy.io ë„ë©”ì¸ ì„¤ì •
1. Cloudflare ëŒ€ì‹œë³´ë“œ â†’ Pages í”„ë¡œì íŠ¸ ì„ íƒ
2. "Custom domains" íƒ­
3. "Set up a custom domain" í´ë¦­
4. `cocy.io` ë˜ëŠ” `www.cocy.io` ì…ë ¥
5. DNS ìë™ ì„¤ì • í™•ì¸

### ì„œë¸Œë„ë©”ì¸ í™œìš© (ë‹¤ì–‘í•œ ì•„ì´ë””ì–´ í…ŒìŠ¤íŠ¸)
- `vocal.cocy.io` - ë³´ì»¬ ìˆ˜ì—…
- `beta.cocy.io` - ë² íƒ€ í…ŒìŠ¤íŠ¸
- `app.cocy.io` - ë©”ì¸ ì•±
- `api.cocy.io` - API ì „ìš©

## ğŸ“Š ëª¨ë‹ˆí„°ë§

### Cloudflare ëŒ€ì‹œë³´ë“œ
- **Analytics**: íŠ¸ë˜í”½, ì„±ëŠ¥ ì§€í‘œ
- **Logs**: ì‹¤ì‹œê°„ ë¡œê·¸
- **D1 Dashboard**: SQL ì¿¼ë¦¬ ì‹¤í–‰

### CLIë¡œ ì‹¤ì‹œê°„ ë¡œê·¸ ë³´ê¸°
```bash
wrangler pages deployment tail
```

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ì¼ë°˜ì ì¸ ë¬¸ì œ

**Q: "Database binding not found" ì˜¤ë¥˜**
```bash
# wrangler.tomlì— database_idê°€ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸
# ì—†ë‹¤ë©´ ë‹¤ì‹œ ìƒì„±
wrangler d1 create vocal-class-db
```

**Q: CORS ì˜¤ë¥˜ ë°œìƒ**
```typescript
// functions/_middleware.ts ì¶”ê°€
export async function onRequest(context) {
    const response = await context.next();
    response.headers.set('Access-Control-Allow-Origin', '*');
    return response;
}
```

**Q: R2 íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨**
- FormData ì‚¬ìš© í™•ì¸
- íŒŒì¼ í¬ê¸° ì œí•œ (ìµœëŒ€ 100MB)
- ë²„í‚· ì´ë¦„ í™•ì¸

## ğŸ”„ ì—…ë°ì´íŠ¸ ë° ë°°í¬

```bash
# ë³€ê²½ì‚¬í•­ ì»¤ë°‹
git add .
git commit -m "Update features"
git push

# Git ì—°ê²° ì‹œ ìë™ ë°°í¬
# ë˜ëŠ” ìˆ˜ë™ ë°°í¬
npm run deploy
```

## ğŸ“ˆ í–¥í›„ í™•ì¥ ê³„íš

### Phase 1: ê¸°ë³¸ ê¸°ëŠ¥ (í˜„ì¬)
- âœ… ìŠ¤ì¼€ì¤„ ê´€ë¦¬
- âœ… ì˜ˆì•½ ì‹œìŠ¤í…œ
- âœ… ì¶œì„ ì²´í¬
- âœ… ìˆ˜ì—… ë„êµ¬

### Phase 2: ê³ ê¸‰ ê¸°ëŠ¥
- [ ] ì‹¤ì‹œê°„ ì•Œë¦¼ (Durable Objects + WebSocket)
- [ ] ì´ë©”ì¼ ì•Œë¦¼ (Mailchannels)
- [ ] ê²°ì œ ì—°ë™ (Stripe)
- [ ] í™”ìƒ ìˆ˜ì—… (WebRTC)

### Phase 3: AI ê¸°ëŠ¥
- [ ] Workers AI ìŒì„± ë¶„ì„
- [ ] ìë™ í”¼ë“œë°± ìƒì„±
- [ ] ë°œìŒ êµì • ì¶”ì²œ
- [ ] ì§„ë„ ì¶”ì  ë° ë¶„ì„

## ğŸ¤ ê¸°ì—¬

ì´ìŠˆì™€ PRì„ í™˜ì˜í•©ë‹ˆë‹¤!

## ğŸ“„ ë¼ì´ì„ ìŠ¤

MIT License

## ğŸ’¬ ì§€ì›

- ğŸ“§ Email: your-email@example.com
- ğŸ’¬ Discord: [ì»¤ë®¤ë‹ˆí‹° ë§í¬]
- ğŸ“– ë¬¸ì„œ: [docs.cocy.io]

---

**Made with â¤ï¸ using Cloudflare**
